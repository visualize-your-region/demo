(self.webpackChunkvyr=self.webpackChunkvyr||[]).push([[73],{5420:(e,t,i)=>{"use strict";i.d(t,{D:()=>n});var r=i(5366),a=i(649);let n=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["select-project-warning"]],decls:8,vars:6,consts:[[1,"select-project-warning-component"],[1,"box","box-warning"],[1,"box-title"],[1,"box-content"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"div",3),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Oqu(r.lcZ(4,2,"components.select-project-warning.title")),r.xp6(3),r.Oqu(r.lcZ(7,4,"components.select-project-warning.content")))},pipes:[a.X$],styles:["[_ngcontent-%COMP%]:root{--pallete-primary:#000;--pallete-accent:#000;--sidenav-width:200px}  .select-project-warning-component{width:100%;padding:16px}"]}),e})()},4446:(e,t,i)=>{"use strict";i.d(t,{q:()=>o});var r=i(649),a=i(1116),n=i(5366);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[a.ez,r.aw]]}),e})()},7073:(e,t,i)=>{"use strict";i.r(t),i.d(t,{RegionDetailsModule:()=>Be});var r=i(649),a=i(1346),n=i(3337),o=i(1116),s=i(3835),c=i(4689),d=i(3837),l=i(4743),p=i(5366),u=i(7723),g=i(9348),m=i(5420),v=i(9244);class h{}var Z=i(1744),f=i(4369),x=i(7307),T=i(6489);function A(e,t){if(1&e&&(p.TgZ(0,"div",16),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",e.featuredLabel," ")}}const q=function(e){return{"type-2":e}};function L(e,t){if(1&e&&(p.TgZ(0,"div",33),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,q,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function D(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.xp6(1),p.hij(" ",e.label," ")}}const b=function(e){return[e]};function C(e,t){if(1&e){const e=p.EpF();p._UZ(0,"div",17),p.TgZ(1,"div",18),p.TgZ(2,"div",19),p.TgZ(3,"div",20),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"div",21),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.TgZ(9,"div",22),p.TgZ(10,"div",23),p.TgZ(11,"h2"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.TgZ(14,"div",24,25),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(16,L,2,4,"div",26),p.qZA(),p.qZA(),p.TgZ(17,"div",27),p.TgZ(18,"h2"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",28,29),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(23,D,2,1,"div",30),p.qZA(),p.qZA(),p.qZA(),p._UZ(24,"div",31),p._UZ(25,"div",32),p.qZA()}if(2&e){const e=p.MAs(15),t=p.MAs(22),i=p.oxw();p.xp6(4),p.Oqu(p.lcZ(5,10,"details-municipy.drag-drop.interactive-general.title")),p.xp6(3),p.Oqu(p.lcZ(8,12,"details-municipy.drag-drop.interactive-general.content")),p.xp6(5),p.Oqu(p.lcZ(13,14,"details-municipy.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",i.dragSourceGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(18,b,t)),p.xp6(2),p.Q6J("ngForOf",i.dragSourceGeneralCharacteristics),p.xp6(3),p.Oqu(p.lcZ(20,16,"details-mesoregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",i.dragTargetGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(20,b,e)),p.xp6(2),p.Q6J("ngForOf",i.dragTargetGeneralCharacteristics)}}function y(e,t){if(1&e&&(p._UZ(0,"div",37),p._UZ(1,"div",37)),2&e){const e=p.oxw().index;p.MGl("id","element-chart-1-",e,""),p.xp6(1),p.MGl("id","element-chart-2-",e,"")}}function w(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-expansion-panel",35),p.NdJ("closed",function(){return p.CHM(e),p.oxw().featuredLabel=null})("opened",function(){const t=p.CHM(e).index,i=p.MAs(2);return p.oxw().setupTable(t,i)}),p.TgZ(1,"mat-expansion-panel-header",12,36),p._uU(3),p.qZA(),p.YNc(4,y,2,2,"ng-template",14),p.qZA()}if(2&e){const e=t.$implicit;p.Gre("numeric-value-descriptor descriptor-",t.index,""),p.xp6(3),p.hij(" ",e," ")}}let k=(()=>{class e{constructor(){this.onReset=new p.vpe,this.parsedDataset=[],this.dragSourceGeneralCharacteristics=[],this.dragTargetGeneralCharacteristics=[]}ngOnInit(){var e;const t=null===(e=this.data)||void 0===e?void 0:e.numericLabels.map((e,t)=>{const i=new h;return i.label=e,i.type="characteristics",i.value={meta_id:t,value:e},i});t&&this.dragSourceGeneralCharacteristics.push(...t)}reset(){this.onReset.next()}dropGeneral(e){e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generalScatterPlot()}generalScatterPlot(){var e;const t=document.querySelector("#general-chart-2a"),i=document.querySelector("#general-chart-2b");t.innerHTML="",i.innerHTML="";const r=this.dragTargetGeneralCharacteristics.map(({value:e})=>e.meta_id);if(t){const e=this.dragTargetGeneralCharacteristics.map(e=>({label:e.label,values:this.data.item.numericEvolution[e.value.meta_id].value})).map(e=>{var t;return{type:"scatterpolar",r:e.values,theta:null===(t=this.data)||void 0===t?void 0:t.period,fill:"toself",name:e.label}});Z.newPlot(t,e,{title:"Visualiza\xe7\xe3o em Radar",polar:{radialaxis:!0}})}if(i){const t=()=>({showline:!1,zeroline:!1,gridcolor:"#FFF",ticklen:4}),a=Object.assign({title:"Matriz Comparativa das Caracter\xedsticas",hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240, 240, 240, .95)"},r.map((e,i)=>({[0===i?"xaxis":`xaxis${i+1}`]:t(),[0===i?"yaxis":`yaxis${i+1}`]:t()})));r.length>1&&(a.height=260*r.length,a.width=i.parentElement.getBoundingClientRect().width-60,a.autosize=!1);const n=null===(e=this.data)||void 0===e?void 0:e.period.map((e,t)=>({type:"splom",name:e,marker:{size:7},dimensions:r.map(e=>{var i,r,a,n;return{label:null===(r=null===(i=this.data)||void 0===i?void 0:i.numericLabels)||void 0===r?void 0:r.find((t,i)=>i===e),values:[l.R.formatValues(null===(n=null===(a=this.data)||void 0===a?void 0:a.item)||void 0===n?void 0:n.numericEvolution[e].value[t])]}})})),o=document.createElement("div");o.id="chart-splom",i.appendChild(o),Z.newPlot(o,n,a,{responsive:!0})}}generalPlot(e){this.setLabelTitle(e),setTimeout(()=>{var e;const t=document.querySelector("#general-chart-1"),i=null===(e=this.data)||void 0===e?void 0:e.item.numericEvolution.map((e,t)=>{var i,r;return{x:null===(i=this.data)||void 0===i?void 0:i.period,y:e.value,mode:"lines+markers",name:null===(r=this.data)||void 0===r?void 0:r.numericLabels[t]}});Z.newPlot(t,i,{title:"Incid\xeancias",xaxis:{type:"category"},legend:{orientation:"h",y:-.3}},{responsive:!0})},100)}setupTable(e,t){var i,r,a,n,o,s,c;if(this.setLabelTitle(t),this.parsedDataset[e])return;const d=null===(i=this.data)||void 0===i?void 0:i.item.numericEvolution[e].value,p=null===(r=this.data)||void 0===r?void 0:r.item.numericEvolution[e].percentageOverMicroregion,u=null===(a=this.data)||void 0===a?void 0:a.item.numericEvolution[e].percentageOverMesoregion,g=null===(n=this.data)||void 0===n?void 0:n.item.numericEvolution[e].percentageOverUf,m=null===(o=this.data)||void 0===o?void 0:o.microregion.numericEvolution[e].value,v=null===(s=this.data)||void 0===s?void 0:s.mesoregion.numericEvolution[e].value,h=null===(c=this.data)||void 0===c?void 0:c.uf.numericEvolution[e].value,f=l.R.average(p),x=l.R.average(u),T=l.R.average(g),A=d.map((e,t)=>({item:e,itemPercOverMicroregion:p[t],itemPercOverMesoregion:u[t],itemPercOverUf:g[t],microregion:m[t],mesoregion:v[t],uf:h[t]}));this.parsedDataset[e]={dataset:A,itemPercentageOverMicroregion:p,itemPercentageOverMesoregion:u,itemPercentageOverUf:g,itemNumericEvolution:d,microregionNumericEvolution:m,mesoregionNumericEvolution:v,ufNumericEvolution:h,avgPercItemOverMicroregion:f,avgPercItemOverMesoregion:x,avgPercItemOverUf:T},setTimeout(()=>{var t,i,r,a,n,o,s;const c=document.querySelector(`#element-chart-1-${e}`);if(c){const e=[{x:null===(t=this.data)||void 0===t?void 0:t.period,y:d,name:"Munic\xedpio",type:"lines+markers"},{x:null===(i=this.data)||void 0===i?void 0:i.period,y:m,name:"Microrregi\xe3o",type:"lines+markers"},{x:null===(r=this.data)||void 0===r?void 0:r.period,y:v,name:"Mesorregi\xe3o",type:"lines+markers"},{x:null===(a=this.data)||void 0===a?void 0:a.period,y:h,name:"Estado",type:"lines+markers"}];Z.newPlot(c,e,{title:"Incid\xeancias",barmode:"stack",legend:{orientation:"h"}},{responsive:!0})}const l=document.querySelector(`#element-chart-2-${e}`);if(l){const e=[{x:null===(n=this.data)||void 0===n?void 0:n.period,y:p,mode:"lines+markers",name:"% do munic\xedpio sobre microrregi\xe3o"},{x:null===(o=this.data)||void 0===o?void 0:o.period,y:u,mode:"lines+markers",name:"% do munic\xedpio sobre mesorregi\xe3o"},{x:null===(s=this.data)||void 0===s?void 0:s.period,y:g,mode:"lines+markers",name:"% do munic\xedpio sobre estado"}];Z.newPlot(l,e,{title:"Percentual do munic\xedpio sobre macrorregi\xf5es",legend:{orientation:"h"}},{responsive:!0})}},100)}setLabelTitle(e){e&&setTimeout(()=>this.featuredLabel=e._element.nativeElement.innerText,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Xpm({type:e,selectors:[["municipy-details"]],inputs:{data:"data"},outputs:{onReset:"onReset"},decls:37,vars:21,consts:[[1,"region-wrapper"],[1,"toolbar"],[1,"left"],["class","region-characteristic-view-chip",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"region-wrapper-content"],[1,"featured-item-outlet"],[1,"featured-item"],[1,"featured-item-title"],[1,"featured-item-content"],[1,"accordion"],[1,"featured-expansion-item",3,"closed","opened"],["collapsedHeight","48px","expandedHeight","48px"],["titleAllMunicipalities",""],["matExpansionPanelContent",""],[3,"class","closed","opened",4,"ngFor","ngForOf"],[1,"region-characteristic-view-chip"],["id","general-chart-1"],[1,"interactive-charts"],[1,"box","box-info",2,"margin-bottom","16px"],[1,"box-title"],[1,"box-content"],[1,"drag-outlet"],[1,"drag-container","drag-container-3"],["id","drag-characteristics","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceGenChar","cdkDropList"],["class","drag-item","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"drag-container","drag-target","drag-container-3"],["id","drag-criteria","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneGenList","cdkDropList"],["class","drag-item type-2","cdkDrag","",4,"ngFor","ngForOf"],["id","general-chart-2a"],["id","general-chart-2b"],["cdkDrag","",1,"drag-item",3,"ngClass"],["cdkDrag","",1,"drag-item","type-2"],[3,"closed","opened"],["itemTitle",""],[3,"id"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._uU(3),p.ALo(4,"translate"),p.YNc(5,A,2,1,"div",3),p.qZA(),p.TgZ(6,"button",4),p.NdJ("click",function(){return t.reset()}),p.TgZ(7,"mat-icon"),p._uU(8,"close"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",5),p.TgZ(10,"div",6),p.TgZ(11,"div",7),p.TgZ(12,"div",8),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"div",9),p._uU(16),p.qZA(),p.qZA(),p.TgZ(17,"div",7),p.TgZ(18,"div",8),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",9),p._uU(22),p.qZA(),p.qZA(),p.TgZ(23,"div",7),p.TgZ(24,"div",8),p._uU(25),p.ALo(26,"translate"),p.qZA(),p.TgZ(27,"div",9),p._uU(28),p.qZA(),p.qZA(),p.qZA(),p.TgZ(29,"mat-accordion",10),p.TgZ(30,"mat-expansion-panel",11),p.NdJ("closed",function(){return t.featuredLabel=null})("opened",function(){p.CHM(e);const i=p.MAs(32);return t.generalPlot(i)}),p.TgZ(31,"mat-expansion-panel-header",12,13),p._uU(33),p.ALo(34,"translate"),p.qZA(),p.YNc(35,C,26,22,"ng-template",14),p.qZA(),p.YNc(36,w,5,4,"mat-expansion-panel",15),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(3),p.AsE(" ",p.lcZ(4,11,"model-constants."+(null==t.data?null:t.data.type)),": ",null==t.data||null==t.data.item?null:t.data.item.name," "),p.xp6(2),p.Q6J("ngIf",t.featuredLabel),p.xp6(8),p.Oqu(p.lcZ(14,13,"model-constants.microregion")),p.xp6(3),p.Oqu(null==t.data||null==t.data.microregion?null:t.data.microregion.name),p.xp6(3),p.Oqu(p.lcZ(20,15,"model-constants.mesoregion")),p.xp6(3),p.Oqu(null==t.data||null==t.data.mesoregion?null:t.data.mesoregion.name),p.xp6(3),p.Oqu(p.lcZ(26,17,"model-constants.state")),p.xp6(3),p.Oqu(null==t.data||null==t.data.uf?null:t.data.uf.name),p.xp6(5),p.hij(" ",p.lcZ(34,19,"details-municipy.all")," "),p.xp6(3),p.Q6J("ngForOf",null==t.data?null:t.data.numericLabels))},directives:[o.O5,f.lW,x.Hw,T.pp,T.ib,T.yz,T.HS,o.sg,v.Wj,v.Zt,o.mk],pipes:[r.X$],styles:["[_ngcontent-%COMP%]:root{--pallete-primary:#000;--pallete-accent:#000;--sidenav-width:200px}  .municipy-wrapper-content{padding:16px}  .municipy-wrapper .featured-item-outlet{margin-bottom:24px}  .municipy-wrapper .numeric-value-descriptor .featured-item-outlet{flex-wrap:wrap}  .municipy-wrapper .numeric-value-descriptor .featured-item{width:300px;margin-bottom:16px}"]}),e})();function M(e,t){if(1&e&&(p.TgZ(0,"div",17),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",e.featuredLabel," ")}}const _=function(e){return{"type-2":e}};function O(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,_,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function U(e,t){if(1&e&&(p.TgZ(0,"div",35),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.xp6(1),p.hij(" ",e.label," ")}}const J=function(e){return[e]};function E(e,t){if(1&e){const e=p.EpF();p._UZ(0,"div",18),p.TgZ(1,"div",19),p.TgZ(2,"div",20),p.TgZ(3,"div",21),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"div",22),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.TgZ(9,"div",23),p.TgZ(10,"div",24),p.TgZ(11,"h2"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.TgZ(14,"div",25,26),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(16,O,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(17,"div",28),p.TgZ(18,"h2"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",29,30),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(23,U,2,1,"div",31),p.qZA(),p.qZA(),p.qZA(),p._UZ(24,"div",32),p._UZ(25,"div",33),p.qZA()}if(2&e){const e=p.MAs(15),t=p.MAs(22),i=p.oxw();p.xp6(4),p.Oqu(p.lcZ(5,10,"details-microregion.drag-drop.interactive-general.title")),p.xp6(3),p.Oqu(p.lcZ(8,12,"details-microregion.drag-drop.interactive-general.content")),p.xp6(5),p.Oqu(p.lcZ(13,14,"details-mesoregion.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",i.dragSourceGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(18,J,t)),p.xp6(2),p.Q6J("ngForOf",i.dragSourceGeneralCharacteristics),p.xp6(3),p.Oqu(p.lcZ(20,16,"details-mesoregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",i.dragTargetGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(20,J,e)),p.xp6(2),p.Q6J("ngForOf",i.dragTargetGeneralCharacteristics)}}const S=function(e){return{"type-1":e}};function N(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,S,"municipy"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function Q(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,_,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const F=function(e,t){return{"type-1":e,"type-2":t}};function H(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,F,"municipy"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const P=function(e,t){return[e,t]};function I(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",36),p.TgZ(1,"div",21),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",22),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA(),p.TgZ(7,"div",23),p.TgZ(8,"div",37),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",38,39),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().drop(t)}),p.YNc(14,N,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(15,"div",40),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",41,42),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().drop(t)}),p.YNc(21,Q,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(22,"div",28),p.TgZ(23,"h2"),p._uU(24),p.ALo(25,"translate"),p.qZA(),p.TgZ(26,"div",43,44),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().drop(t)}),p.YNc(28,H,2,5,"div",27),p.qZA(),p.qZA(),p.qZA(),p._UZ(29,"div",45)}if(2&e){const e=p.MAs(13),t=p.MAs(20),i=p.MAs(27),r=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,14,"details-microregion.drag-drop.interactive-municipalities.title")),p.xp6(3),p.Oqu(p.lcZ(6,16,"details-microregion.drag-drop.interactive-municipalities.content")),p.xp6(5),p.Oqu(p.lcZ(11,18,"details-microregion.drag-drop.municipalities")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSourceMunicipalities)("cdkDropListConnectedTo",p.VKq(24,J,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSourceMunicipalities),p.xp6(3),p.Oqu(p.lcZ(18,20,"details-microregion.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSourceCharacteristics)("cdkDropListConnectedTo",p.VKq(26,J,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSourceCharacteristics),p.xp6(3),p.Oqu(p.lcZ(25,22,"details-microregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTargetCriteria)("cdkDropListConnectedTo",p.WLB(28,P,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTargetCriteria)}}function j(e,t){if(1&e&&(p._UZ(0,"div",48),p._UZ(1,"div",48)),2&e){const e=p.oxw().index;p.MGl("id","element-chart-1-",e,""),p.xp6(1),p.MGl("id","element-chart-2-",e,"")}}function G(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-expansion-panel",46),p.NdJ("opened",function(){const t=p.CHM(e).index,i=p.MAs(2);return p.oxw().setupTable(t,i)})("closed",function(){return p.CHM(e),p.oxw().featuredLabel=null}),p.TgZ(1,"mat-expansion-panel-header",12,47),p._uU(3),p.qZA(),p.YNc(4,j,2,2,"ng-template",14),p.qZA()}if(2&e){const e=t.$implicit;p.Gre("numeric-value-descriptor descriptor-",t.index,""),p.xp6(3),p.hij(" ",e," ")}}let Y=(()=>{class e{constructor(){this.onReset=new p.vpe,this.parsedDataset=[],this.dragSourceMunicipalities=[],this.dragSourceCharacteristics=[],this.dragTargetCriteria=[],this.dragSourceGeneralCharacteristics=[],this.dragTargetGeneralCharacteristics=[]}ngOnInit(){var e,t,i;const r=null===(e=this.data)||void 0===e?void 0:e.numericLabels.map((e,t)=>{const i=new h;return i.label=e,i.type="characteristics",i.value={meta_id:t,value:e},i});r&&(this.dragSourceCharacteristics.push(...r),this.dragSourceGeneralCharacteristics.push(...r));const a=null===(i=null===(t=this.data)||void 0===t?void 0:t.municipalities)||void 0===i?void 0:i.map(e=>{const t=new h;return t.label=e.name,t.type="municipy",t.value=e,t});a&&this.dragSourceMunicipalities.push(...a)}reset(){this.onReset.next()}dropGeneral(e){e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generalScatterPlot()}drop(e){const t=["drag-municipalities","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTargetCriteria[e.previousIndex];if("characteristics"===r.type&&"drag-municipalities"===i||"municipy"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMunicipyPlot()}generateMunicipyPlot(){const e=document.querySelector("#chart-municipy-1-1"),t=this.dragTargetCriteria.filter(e=>"municipy"===e.type).map(({value:e})=>e),i=this.dragTargetCriteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?e&&(e.innerHTML="",i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generalPlot(e){this.setLabelTitle(e),setTimeout(()=>{var e;const t=document.querySelector("#general-chart-1"),i=null===(e=this.data)||void 0===e?void 0:e.item.numericEvolution.map((e,t)=>{var i,r;return{x:null===(i=this.data)||void 0===i?void 0:i.period,y:e.value,mode:"lines+markers",name:null===(r=this.data)||void 0===r?void 0:r.numericLabels[t]}});Z.newPlot(t,i,{title:"Incid\xeancias",xaxis:{type:"category"},legend:{orientation:"h",y:-.3}},{responsive:!0})},100)}generalScatterPlot(){var e;const t=document.querySelector("#general-chart-2a"),i=document.querySelector("#general-chart-2b");t.innerHTML="",i.innerHTML="";const r=this.dragTargetGeneralCharacteristics.map(({value:e})=>e.meta_id);if(t){const e=this.dragTargetGeneralCharacteristics.map(e=>({label:e.label,values:this.data.item.numericEvolution[e.value.meta_id].value})).map(e=>{var t;return{type:"scatterpolar",r:e.values,theta:null===(t=this.data)||void 0===t?void 0:t.period,fill:"toself",name:e.label}});Z.newPlot(t,e,{title:"Visualiza\xe7\xe3o em Radar",polar:{radialaxis:!0}})}if(i){const t=()=>({showline:!1,zeroline:!1,gridcolor:"#FFF",ticklen:4}),a=Object.assign({title:"Matriz Comparativa das Caracter\xedsticas",hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240, 240, 240, .95)"},r.map((e,i)=>({[0===i?"xaxis":`xaxis${i+1}`]:t(),[0===i?"yaxis":`yaxis${i+1}`]:t()})));r.length>1&&(a.height=260*r.length,a.width=i.parentElement.getBoundingClientRect().width-60,a.autosize=!1);const n=null===(e=this.data)||void 0===e?void 0:e.period.map((e,t)=>({type:"splom",name:e,marker:{size:7},dimensions:r.map(e=>{var i,r,a,n;return{label:null===(r=null===(i=this.data)||void 0===i?void 0:i.numericLabels)||void 0===r?void 0:r.find((t,i)=>i===e),values:[l.R.formatValues(null===(n=null===(a=this.data)||void 0===a?void 0:a.item)||void 0===n?void 0:n.numericEvolution[e].value[t])]}})})),o=document.createElement("div");o.id="chart-splom",i.appendChild(o),Z.newPlot(o,n,a,{responsive:!0})}}setupTable(e,t){var i,r,a,n,o;if(this.setLabelTitle(t),this.parsedDataset[e])return;const s=null===(i=this.data)||void 0===i?void 0:i.item.numericEvolution[e].value,c=null===(r=this.data)||void 0===r?void 0:r.item.numericEvolution[e].percentageOverMesoregion,d=null===(a=this.data)||void 0===a?void 0:a.item.numericEvolution[e].percentageOverUf,l=null===(n=this.data)||void 0===n?void 0:n.mesoregion.numericEvolution[e].value,p=null===(o=this.data)||void 0===o?void 0:o.uf.numericEvolution[e].value,u=s.map((e,t)=>({item:e,itemPercOverMesoregion:c[t],itemPercOverUf:d[t],mesoregion:l[t],uf:p[t]}));this.parsedDataset[e]={dataset:u,itemPercentageOverMesoregion:c,itemPercentageOverUf:d,itemNumericEvolution:s,mesoregionNumericEvolution:l,ufNumericEvolution:p},setTimeout(()=>{var t,i,r,a,n;const o=document.querySelector(`#element-chart-1-${e}`);if(o){const e=[{x:null===(t=this.data)||void 0===t?void 0:t.period,y:s,name:"Microrregi\xe3o",type:"lines+markers"},{x:null===(i=this.data)||void 0===i?void 0:i.period,y:l,name:"Mesorregi\xe3o",type:"lines+markers"},{x:null===(r=this.data)||void 0===r?void 0:r.period,y:p,name:"Estado",type:"lines+markers"}];Z.newPlot(o,e,{title:"Incid\xeancias",barmode:"stack",legend:{orientation:"h"}},{responsive:!0})}const u=document.querySelector(`#element-chart-2-${e}`);if(u){const e=[{x:null===(a=this.data)||void 0===a?void 0:a.period,y:c,mode:"lines+markers",name:"% da microrregi\xe3o sobre mesorregi\xe3o"},{x:null===(n=this.data)||void 0===n?void 0:n.period,y:d,mode:"lines+markers",name:"% da microrregi\xe3o sobre estado"}];Z.newPlot(u,e,{title:"Percentual da microrregi\xe3o sobre macrorregi\xf5es",legend:{orientation:"h"}},{responsive:!0})}},100)}setLabelTitle(e){e&&setTimeout(()=>this.featuredLabel=e._element.nativeElement.innerText,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Xpm({type:e,selectors:[["microregion-details"]],inputs:{data:"data"},outputs:{onReset:"onReset"},decls:37,vars:20,consts:[[1,"region-wrapper"],[1,"toolbar"],[1,"left"],["class","region-characteristic-view-chip",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"region-wrapper-content"],[1,"featured-item-outlet"],[1,"featured-item"],[1,"featured-item-title"],[1,"featured-item-content"],[1,"accordion"],[1,"featured-expansion-item",3,"closed","opened"],["collapsedHeight","48px","expandedHeight","48px"],["mainTitle",""],["matExpansionPanelContent",""],["municipyLabel",""],[3,"class","opened","closed",4,"ngFor","ngForOf"],[1,"region-characteristic-view-chip"],["id","general-chart-1"],[1,"interactive-charts"],[1,"box","box-info",2,"margin-bottom","16px"],[1,"box-title"],[1,"box-content"],[1,"drag-outlet"],[1,"drag-container","drag-container-3"],["id","drag-characteristics","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceGenChar","cdkDropList"],["class","drag-item","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"drag-container","drag-target","drag-container-3"],["id","drag-criteria","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneGenList","cdkDropList"],["class","drag-item type-2","cdkDrag","",4,"ngFor","ngForOf"],["id","general-chart-2a"],["id","general-chart-2b"],["cdkDrag","",1,"drag-item",3,"ngClass"],["cdkDrag","",1,"drag-item","type-2"],[1,"box","box-info",2,"margin","16px 0"],[1,"drag-container","drag-container-1"],["id","drag-municipalities","cdkDropList","",1,"drag-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceMunicipalities","cdkDropList"],[1,"drag-container","drag-container-2"],["id","drag-characteristics","cdkDropList","",1,"drag-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceCharacteristics","cdkDropList"],["id","drag-criteria","cdkDropList","",1,"drag-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneList","cdkDropList"],["id","chart-municipy-1-1"],[3,"opened","closed"],["itemLabel",""],[3,"id"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._uU(3),p.ALo(4,"translate"),p.YNc(5,M,2,1,"div",3),p.qZA(),p.TgZ(6,"button",4),p.NdJ("click",function(){return t.reset()}),p.TgZ(7,"mat-icon"),p._uU(8,"close"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",5),p.TgZ(10,"div",6),p.TgZ(11,"div",7),p.TgZ(12,"div",8),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"div",9),p._uU(16),p.qZA(),p.qZA(),p.TgZ(17,"div",7),p.TgZ(18,"div",8),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",9),p._uU(22),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"mat-accordion",10),p.TgZ(24,"mat-expansion-panel",11),p.NdJ("closed",function(){return t.featuredLabel=null})("opened",function(){p.CHM(e);const i=p.MAs(26);return t.generalPlot(i)}),p.TgZ(25,"mat-expansion-panel-header",12,13),p._uU(27),p.ALo(28,"translate"),p.qZA(),p.YNc(29,E,26,22,"ng-template",14),p.qZA(),p.TgZ(30,"mat-expansion-panel",11),p.NdJ("closed",function(){return t.featuredLabel=null})("opened",function(){p.CHM(e);const i=p.MAs(32);return t.setLabelTitle(i)}),p.TgZ(31,"mat-expansion-panel-header",12,15),p._uU(33),p.ALo(34,"translate"),p.qZA(),p.YNc(35,I,30,31,"ng-template",14),p.qZA(),p.YNc(36,G,5,4,"mat-expansion-panel",16),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(3),p.AsE(" ",p.lcZ(4,10,"model-constants."+(null==t.data?null:t.data.type)),": ",null==t.data||null==t.data.item?null:t.data.item.name," "),p.xp6(2),p.Q6J("ngIf",t.featuredLabel),p.xp6(8),p.Oqu(p.lcZ(14,12,"model-constants.mesoregion")),p.xp6(3),p.Oqu(null==t.data||null==t.data.mesoregion?null:t.data.mesoregion.name),p.xp6(3),p.Oqu(p.lcZ(20,14,"model-constants.state")),p.xp6(3),p.Oqu(null==t.data||null==t.data.uf?null:t.data.uf.name),p.xp6(5),p.hij(" ",p.lcZ(28,16,"details-microregion.all")," "),p.xp6(6),p.hij(" ",p.lcZ(34,18,"details-microregion.municipalities")," "),p.xp6(3),p.Q6J("ngForOf",null==t.data?null:t.data.numericLabels))},directives:[o.O5,f.lW,x.Hw,T.pp,T.ib,T.yz,T.HS,o.sg,v.Wj,v.Zt,o.mk],pipes:[r.X$],styles:[""]}),e})();function $(e,t){if(1&e&&(p.TgZ(0,"div",22),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",e.featuredLabel," ")}}const V=function(e){return{"type-2":e}};function R(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,V,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function z(e,t){if(1&e&&(p.TgZ(0,"div",38),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.xp6(1),p.hij(" ",e.label," ")}}const K=function(e){return[e]};function B(e,t){if(1&e){const e=p.EpF();p._UZ(0,"div",23),p.TgZ(1,"div",24),p.TgZ(2,"div",25),p.TgZ(3,"div",17),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"div",18),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.TgZ(9,"div",26),p.TgZ(10,"div",27),p.TgZ(11,"h2"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.TgZ(14,"div",28,29),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(16,R,2,4,"div",30),p.qZA(),p.qZA(),p.TgZ(17,"div",31),p.TgZ(18,"h2"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",32,33),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(23,z,2,1,"div",34),p.qZA(),p.qZA(),p.qZA(),p._UZ(24,"div",35),p._UZ(25,"div",36),p.qZA()}if(2&e){const e=p.MAs(15),t=p.MAs(22),i=p.oxw();p.xp6(4),p.Oqu(p.lcZ(5,10,"details-mesoregion.drag-drop.interactive-general.title")),p.xp6(3),p.Oqu(p.lcZ(8,12,"details-mesoregion.drag-drop.interactive-general.content")),p.xp6(5),p.Oqu(p.lcZ(13,14,"details-mesoregion.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",i.dragSourceGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(18,K,t)),p.xp6(2),p.Q6J("ngForOf",i.dragSourceGeneralCharacteristics),p.xp6(3),p.Oqu(p.lcZ(20,16,"details-mesoregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",i.dragTargetGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(20,K,e)),p.xp6(2),p.Q6J("ngForOf",i.dragTargetGeneralCharacteristics)}}const W=function(e){return{"type-1":e}};function X(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,W,"microregion"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function ee(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,V,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const te=function(e,t){return{"type-1":e,"type-2":t}};function ie(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,te,"microregion"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const re=function(e,t){return[e,t]};function ae(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",26),p.TgZ(1,"div",39),p.TgZ(2,"h2"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"div",40,41),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(7,X,2,4,"div",30),p.qZA(),p.qZA(),p.TgZ(8,"div",42),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",28,43),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(14,ee,2,4,"div",30),p.qZA(),p.qZA(),p.TgZ(15,"div",31),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",32,44),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(21,ie,2,5,"div",30),p.qZA(),p.qZA(),p.qZA(),p._UZ(22,"div",45)}if(2&e){const e=p.MAs(6),t=p.MAs(13),i=p.MAs(20),r=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,12,"details-mesoregion.drag-drop.microregion")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource2Microregions)("cdkDropListConnectedTo",p.VKq(18,K,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource2Microregions),p.xp6(3),p.Oqu(p.lcZ(11,14,"details-mesoregion.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource2Characteristics)("cdkDropListConnectedTo",p.VKq(20,K,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource2Characteristics),p.xp6(3),p.Oqu(p.lcZ(18,16,"details-mesoregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTarget2Criteria)("cdkDropListConnectedTo",p.WLB(22,re,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTarget2Criteria)}}function ne(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,W,"municipy"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function oe(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,V,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function se(e,t){if(1&e&&(p.TgZ(0,"div",37),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,te,"municipy"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function ce(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",26),p.TgZ(1,"div",39),p.TgZ(2,"h2"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"div",46,47),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(7,ne,2,4,"div",30),p.qZA(),p.qZA(),p.TgZ(8,"div",42),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",28,48),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(14,oe,2,4,"div",30),p.qZA(),p.qZA(),p.TgZ(15,"div",31),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",32,49),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(21,se,2,5,"div",30),p.qZA(),p.qZA(),p.qZA(),p._UZ(22,"div",50)}if(2&e){const e=p.MAs(6),t=p.MAs(13),i=p.MAs(20),r=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,12,"details-mesoregion.drag-drop.municipalities")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource1Municipalities)("cdkDropListConnectedTo",p.VKq(18,K,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource1Municipalities),p.xp6(3),p.Oqu(p.lcZ(11,14,"details-mesoregion.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource1Characteristics)("cdkDropListConnectedTo",p.VKq(20,K,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource1Characteristics),p.xp6(3),p.Oqu(p.lcZ(18,16,"details-mesoregion.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTarget1Criteria)("cdkDropListConnectedTo",p.WLB(22,re,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTarget1Criteria)}}function de(e,t){if(1&e&&(p._UZ(0,"div",53),p._UZ(1,"div",53),p._UZ(2,"div",53)),2&e){const e=p.oxw().index;p.MGl("id","element-chart-1-",e,""),p.xp6(1),p.MGl("id","element-chart-2-",e,""),p.xp6(1),p.MGl("id","element-chart-3-",e,"")}}function le(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-expansion-panel",51),p.NdJ("closed",function(){return p.CHM(e),p.oxw().featuredLabel=""})("opened",function(){const t=p.CHM(e).index,i=p.MAs(2);return p.oxw().setupTable(t,i)}),p.TgZ(1,"mat-expansion-panel-header",12,52),p._uU(3),p.qZA(),p.YNc(4,de,3,3,"ng-template",14),p.qZA()}if(2&e){const e=t.$implicit;p.Gre("numeric-value-descriptor descriptor-",t.index,""),p.xp6(3),p.hij(" ",e," ")}}let pe=(()=>{class e{constructor(e){this.cdr=e,this.onReset=new p.vpe,this.parsedDataset=[],this.dragSourceGeneralCharacteristics=[],this.dragTargetGeneralCharacteristics=[],this.dragSource1Municipalities=[],this.dragSource1Characteristics=[],this.dragTarget1Criteria=[],this.dragSource2Microregions=[],this.dragSource2Characteristics=[],this.dragTarget2Criteria=[]}ngOnInit(){var e,t,i,r,a;const n=null===(e=this.data)||void 0===e?void 0:e.numericLabels.map((e,t)=>{const i=new h;return i.label=e,i.type="characteristics",i.value={meta_id:t,value:e},i});n&&(this.dragSource1Characteristics.push(...n),this.dragSource2Characteristics.push(...n),this.dragSourceGeneralCharacteristics.push(...n));const o=null===(i=null===(t=this.data)||void 0===t?void 0:t.municipalities)||void 0===i?void 0:i.map(e=>{const t=new h;return t.label=e.name,t.type="municipy",t.value=e,t});o&&this.dragSource1Municipalities.push(...o);const s=null===(a=null===(r=this.data)||void 0===r?void 0:r.microregions)||void 0===a?void 0:a.map(e=>{const t=new h;return t.label=e.name,t.type="microregion",t.value=e,t});s&&this.dragSource2Microregions.push(...s)}reset(){this.onReset.next()}dropGeneral(e){e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generalScatterPlot()}dropMunicipy(e){const t=["drag-municipalities","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTarget1Criteria[e.previousIndex];if("characteristics"===r.type&&"drag-municipalities"===i||"municipy"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMunicipyPlot(),this.cdr.detectChanges()}dropMicroregion(e){const t=["drag-microregion","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTarget2Criteria[e.previousIndex];if("characteristics"===r.type&&"drag-microregion"===i||"microregion"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMicroregionPlot(),this.cdr.detectChanges()}generateMicroregionPlot(){const e=document.querySelector("#chart-microregion-1-1"),t=this.dragTarget2Criteria.filter(e=>"microregion"===e.type).map(({value:e})=>e),i=this.dragTarget2Criteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?(e&&(e.innerHTML=""),e&&i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generateMunicipyPlot(){const e=document.querySelector("#chart-municipy-1-1"),t=this.dragTarget1Criteria.filter(e=>"municipy"===e.type).map(({value:e})=>e),i=this.dragTarget1Criteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?e&&(e.innerHTML="",i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generalPlot(e){this.setLabelTitle(e),setTimeout(()=>{var e;const t=document.querySelector("#general-chart-1"),i=null===(e=this.data)||void 0===e?void 0:e.item.numericEvolution.map((e,t)=>{var i,r;return{x:null===(i=this.data)||void 0===i?void 0:i.period,y:e.value,mode:"lines+markers",name:null===(r=this.data)||void 0===r?void 0:r.numericLabels[t]}});Z.newPlot(t,i,{title:"Incid\xeancias",xaxis:{type:"category"},legend:{orientation:"h",y:-.3}},{responsive:!0})},100)}generalScatterPlot(){var e;const t=document.querySelector("#general-chart-2a"),i=document.querySelector("#general-chart-2b");t.innerHTML="",i.innerHTML="";const r=this.dragTargetGeneralCharacteristics.map(({value:e})=>e.meta_id);if(t){const e=this.dragTargetGeneralCharacteristics.map(e=>({label:e.label,values:this.data.item.numericEvolution[e.value.meta_id].value})).map(e=>{var t;return{type:"scatterpolar",r:e.values,theta:null===(t=this.data)||void 0===t?void 0:t.period,fill:"toself",name:e.label}});Z.newPlot(t,e,{title:"Visualiza\xe7\xe3o em Radar",polar:{radialaxis:!0}})}if(i){const t=()=>({showline:!1,zeroline:!1,gridcolor:"#FFF",ticklen:4}),a=Object.assign({title:"Matriz Comparativa das Caracter\xedsticas",hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240, 240, 240, .95)"},r.map((e,i)=>({[0===i?"xaxis":`xaxis${i+1}`]:t(),[0===i?"yaxis":`yaxis${i+1}`]:t()})));r.length>1&&(a.height=260*r.length,a.width=i.parentElement.getBoundingClientRect().width-60,a.autosize=!1);const n=null===(e=this.data)||void 0===e?void 0:e.period.map((e,t)=>({type:"splom",name:e,marker:{size:7},dimensions:r.map(e=>{var i,r,a,n;return{label:null===(r=null===(i=this.data)||void 0===i?void 0:i.numericLabels)||void 0===r?void 0:r.find((t,i)=>i===e),values:[l.R.formatValues(null===(n=null===(a=this.data)||void 0===a?void 0:a.item)||void 0===n?void 0:n.numericEvolution[e].value[t])]}})})),o=document.createElement("div");o.id="chart-splom",i.appendChild(o),Z.newPlot(o,n,a,{responsive:!0})}}setupTable(e,t){var i,r,a;if(this.setLabelTitle(t),this.parsedDataset[e])return;const n=null===(i=this.data)||void 0===i?void 0:i.item.numericEvolution[e].value,o=null===(r=this.data)||void 0===r?void 0:r.item.numericEvolution[e].percentageOverUf,s=null===(a=this.data)||void 0===a?void 0:a.uf.numericEvolution[e].value,c=n.map((e,t)=>({item:e,itemPercOverUf:o[t],uf:s[t]}));this.parsedDataset[e]={dataset:c,itemPercentageOverUf:o,itemNumericEvolution:n,ufNumericEvolution:s},setTimeout(()=>{var t,i,r;const a=document.querySelector(`#element-chart-1-${e}`);if(a){const e=[{x:null===(t=this.data)||void 0===t?void 0:t.period,y:n,name:"Mesorregi\xe3o",type:"lines+markers"},{x:null===(i=this.data)||void 0===i?void 0:i.period,y:s,name:"Estado",type:"lines+markers"}];Z.newPlot(a,e,{title:"Incid\xeancias",barmode:"stack",legend:{orientation:"h"}},{responsive:!0})}const c=document.querySelector(`#element-chart-2-${e}`);if(c){const e=[{x:null===(r=this.data)||void 0===r?void 0:r.period,y:o,mode:"lines+markers",name:"% do munic\xedpio sobre estado"}];Z.newPlot(c,e,{title:"Percentual do munic\xedpio sobre macrorregi\xf5es",legend:{orientation:"h"}},{responsive:!0})}},100)}setLabelTitle(e){e&&setTimeout(()=>this.featuredLabel=e._element.nativeElement.innerText,0)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(p.sBO))},e.\u0275cmp=p.Xpm({type:e,selectors:[["mesoregion-details"]],inputs:{data:"data"},outputs:{onReset:"onReset"},decls:51,vars:31,consts:[[1,"region-wrapper"],[1,"toolbar"],[1,"left"],["class","region-characteristic-view-chip",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"region-wrapper-content"],[1,"featured-item-outlet"],[1,"featured-item"],[1,"featured-item-title"],[1,"featured-item-content"],[1,"accordion"],[1,"featured-expansion-item",3,"closed","opened"],["collapsedHeight","48px","expandedHeight","48px"],["mainTitle",""],["matExpansionPanelContent",""],[1,"featured-expansion-item",3,"opened","closed"],[1,"box","box-info",2,"margin","16px 0"],[1,"box-title"],[1,"box-content"],["labelMicroregion",""],["municipyLabel",""],[3,"class","closed","opened",4,"ngFor","ngForOf"],[1,"region-characteristic-view-chip"],["id","general-chart-1"],[1,"interactive-charts"],[1,"box","box-info",2,"margin-bottom","16px"],[1,"drag-outlet"],[1,"drag-container","drag-container-3"],["id","drag-characteristics","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceGenChar","cdkDropList"],["class","drag-item","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"drag-container","drag-target","drag-container-3"],["id","drag-criteria","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneGenList","cdkDropList"],["class","drag-item type-2","cdkDrag","",4,"ngFor","ngForOf"],["id","general-chart-2a"],["id","general-chart-2b"],["cdkDrag","",1,"drag-item",3,"ngClass"],["cdkDrag","",1,"drag-item","type-2"],[1,"drag-container","drag-container-1"],["id","drag-microregion","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["source2a","cdkDropList"],[1,"drag-container","drag-container-2"],["source2b","cdkDropList"],["target2","cdkDropList"],["id","chart-microregion-1-1"],["id","drag-municipalities","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceMunicipalities","cdkDropList"],["sourceCharacteristics","cdkDropList"],["doneList","cdkDropList"],["id","chart-municipy-1-1"],[3,"closed","opened"],["itemLabel",""],[3,"id"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._uU(3),p.ALo(4,"translate"),p.YNc(5,$,2,1,"div",3),p.qZA(),p.TgZ(6,"button",4),p.NdJ("click",function(){return t.reset()}),p.TgZ(7,"mat-icon"),p._uU(8,"close"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",5),p.TgZ(10,"div",6),p.TgZ(11,"div",7),p.TgZ(12,"div",8),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"div",9),p._uU(16),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"mat-accordion",10),p.TgZ(18,"mat-expansion-panel",11),p.NdJ("closed",function(){return t.featuredLabel=""})("opened",function(){p.CHM(e);const i=p.MAs(20);return t.generalPlot(i)}),p.TgZ(19,"mat-expansion-panel-header",12,13),p._uU(21),p.ALo(22,"translate"),p.qZA(),p.YNc(23,B,26,22,"ng-template",14),p.qZA(),p.TgZ(24,"mat-expansion-panel",15),p.NdJ("opened",function(){p.CHM(e);const i=p.MAs(33);return t.setLabelTitle(i)})("closed",function(){return t.featuredLabel=""}),p.TgZ(25,"div",16),p.TgZ(26,"div",17),p._uU(27),p.ALo(28,"translate"),p.qZA(),p.TgZ(29,"div",18),p._uU(30),p.ALo(31,"translate"),p.qZA(),p.qZA(),p.TgZ(32,"mat-expansion-panel-header",12,19),p._uU(34),p.ALo(35,"translate"),p.qZA(),p.YNc(36,ae,23,25,"ng-template",14),p.qZA(),p.TgZ(37,"mat-expansion-panel",15),p.NdJ("opened",function(){p.CHM(e);const i=p.MAs(46);return t.setLabelTitle(i)})("closed",function(){return t.featuredLabel=""}),p.TgZ(38,"div",16),p.TgZ(39,"div",17),p._uU(40),p.ALo(41,"translate"),p.qZA(),p.TgZ(42,"div",18),p._uU(43),p.ALo(44,"translate"),p.qZA(),p.qZA(),p.TgZ(45,"mat-expansion-panel-header",12,20),p._uU(47),p.ALo(48,"translate"),p.qZA(),p.YNc(49,ce,23,25,"ng-template",14),p.qZA(),p.YNc(50,le,5,4,"mat-expansion-panel",21),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(3),p.AsE(" ",p.lcZ(4,13,"model-constants."+(null==t.data?null:t.data.type)),": ",null==t.data||null==t.data.item?null:t.data.item.name," "),p.xp6(2),p.Q6J("ngIf",t.featuredLabel),p.xp6(8),p.Oqu(p.lcZ(14,15,"model-constants.state")),p.xp6(3),p.Oqu(null==t.data||null==t.data.uf?null:t.data.uf.name),p.xp6(5),p.hij(" ",p.lcZ(22,17,"details-mesoregion.all")," "),p.xp6(6),p.Oqu(p.lcZ(28,19,"details-mesoregion.drag-drop.interactive-microregion.title")),p.xp6(3),p.Oqu(p.lcZ(31,21,"details-mesoregion.drag-drop.interactive-microregion.content")),p.xp6(4),p.hij(" ",p.lcZ(35,23,"details-mesoregion.microregion")," "),p.xp6(6),p.Oqu(p.lcZ(41,25,"details-mesoregion.drag-drop.interactive-municipalities.title")),p.xp6(3),p.Oqu(p.lcZ(44,27,"details-mesoregion.drag-drop.interactive-municipalities.content")),p.xp6(4),p.hij(" ",p.lcZ(48,29,"details-mesoregion.municipalities")," "),p.xp6(3),p.Q6J("ngForOf",null==t.data?null:t.data.numericLabels))},directives:[o.O5,f.lW,x.Hw,T.pp,T.ib,T.yz,T.HS,o.sg,v.Wj,v.Zt,o.mk],pipes:[r.X$],styles:[""]}),e})();function ue(e,t){if(1&e&&(p.TgZ(0,"div",19),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",e.featuredLabel," ")}}const ge=function(e){return{"type-2":e}};function me(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,ge,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function ve(e,t){if(1&e&&(p.TgZ(0,"div",35),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.xp6(1),p.hij(" ",e.label," ")}}const he=function(e){return[e]};function Ze(e,t){if(1&e){const e=p.EpF();p._UZ(0,"div",20),p.TgZ(1,"div",21),p.TgZ(2,"div",22),p.TgZ(3,"div",13),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"div",14),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.TgZ(9,"div",23),p.TgZ(10,"div",24),p.TgZ(11,"h2"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.TgZ(14,"div",25,26),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(16,me,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(17,"div",28),p.TgZ(18,"h2"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.TgZ(21,"div",29,30),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropGeneral(t)}),p.YNc(23,ve,2,1,"div",31),p.qZA(),p.qZA(),p.qZA(),p._UZ(24,"div",32),p._UZ(25,"div",33),p.qZA()}if(2&e){const e=p.MAs(15),t=p.MAs(22),i=p.oxw();p.xp6(4),p.Oqu(p.lcZ(5,10,"details-state.drag-drop.interactive-general.title")),p.xp6(3),p.Oqu(p.lcZ(8,12,"details-state.drag-drop.interactive-general.content")),p.xp6(5),p.Oqu(p.lcZ(13,14,"details-state.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",i.dragSourceGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(18,he,t)),p.xp6(2),p.Q6J("ngForOf",i.dragSourceGeneralCharacteristics),p.xp6(3),p.Oqu(p.lcZ(20,16,"details-state.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",i.dragTargetGeneralCharacteristics)("cdkDropListConnectedTo",p.VKq(20,he,e)),p.xp6(2),p.Q6J("ngForOf",i.dragTargetGeneralCharacteristics)}}const fe=function(e){return{"type-1":e}};function xe(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,fe,"mesoregion"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function Te(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,ge,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const Ae=function(e,t){return{"type-1":e,"type-2":t}};function qe(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,Ae,"mesoregion"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}const Le=function(e,t){return[e,t]};function De(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",23),p.TgZ(1,"div",36),p.TgZ(2,"h2"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"div",37,38),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMesoregion(t)}),p.YNc(7,xe,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(8,"div",39),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",25,40),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMesoregion(t)}),p.YNc(14,Te,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(15,"div",28),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",29,41),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMesoregion(t)}),p.YNc(21,qe,2,5,"div",27),p.qZA(),p.qZA(),p.qZA(),p._UZ(22,"div",42)}if(2&e){const e=p.MAs(6),t=p.MAs(13),i=p.MAs(20),r=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,12,"details-state.drag-drop.mesoregion")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource3Mesoregions)("cdkDropListConnectedTo",p.VKq(18,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource3Mesoregions),p.xp6(3),p.Oqu(p.lcZ(11,14,"details-state.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource2Characteristics)("cdkDropListConnectedTo",p.VKq(20,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource2Characteristics),p.xp6(3),p.Oqu(p.lcZ(18,16,"details-state.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTarget3Criteria)("cdkDropListConnectedTo",p.WLB(22,Le,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTarget3Criteria)}}function be(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,fe,"microregion"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function Ce(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,ge,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function ye(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,Ae,"microregion"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function we(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",23),p.TgZ(1,"div",36),p.TgZ(2,"h2"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"div",43,44),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(7,be,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(8,"div",39),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",25,45),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(14,Ce,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(15,"div",28),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",29,46),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMicroregion(t)}),p.YNc(21,ye,2,5,"div",27),p.qZA(),p.qZA(),p.qZA(),p._UZ(22,"div",47)}if(2&e){const e=p.MAs(6),t=p.MAs(13),i=p.MAs(20),r=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,12,"details-state.drag-drop.microregion")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource2Microregions)("cdkDropListConnectedTo",p.VKq(18,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource2Microregions),p.xp6(3),p.Oqu(p.lcZ(11,14,"details-state.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource2Characteristics)("cdkDropListConnectedTo",p.VKq(20,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource2Characteristics),p.xp6(3),p.Oqu(p.lcZ(18,16,"details-state.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTarget2Criteria)("cdkDropListConnectedTo",p.WLB(22,Le,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTarget2Criteria)}}function ke(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,fe,"municipy"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function Me(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.VKq(2,ge,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function _e(e,t){if(1&e&&(p.TgZ(0,"div",34),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("ngClass",p.WLB(2,Ae,"municipy"===e.type,"characteristics"===e.type)),p.xp6(1),p.hij(" ",e.label," ")}}function Oe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",23),p.TgZ(1,"div",36),p.TgZ(2,"h2"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"div",48,49),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(7,ke,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(8,"div",39),p.TgZ(9,"h2"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",25,50),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(14,Me,2,4,"div",27),p.qZA(),p.qZA(),p.TgZ(15,"div",28),p.TgZ(16,"h2"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"div",29,51),p.NdJ("cdkDropListDropped",function(t){return p.CHM(e),p.oxw().dropMunicipy(t)}),p.YNc(21,_e,2,5,"div",27),p.qZA(),p.qZA(),p.qZA(),p._UZ(22,"div",52)}if(2&e){const e=p.MAs(6),t=p.MAs(13),i=p.MAs(20),r=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,12,"details-state.drag-drop.municipalities")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource1Municipalities)("cdkDropListConnectedTo",p.VKq(18,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource1Municipalities),p.xp6(3),p.Oqu(p.lcZ(11,14,"details-state.drag-drop.characteristics")),p.xp6(2),p.Q6J("cdkDropListData",r.dragSource1Characteristics)("cdkDropListConnectedTo",p.VKq(20,he,i)),p.xp6(2),p.Q6J("ngForOf",r.dragSource1Characteristics),p.xp6(3),p.Oqu(p.lcZ(18,16,"details-state.drag-drop.used-data")),p.xp6(2),p.Q6J("cdkDropListData",r.dragTarget1Criteria)("cdkDropListConnectedTo",p.WLB(22,Le,e,t)),p.xp6(2),p.Q6J("ngForOf",r.dragTarget1Criteria)}}function Ue(e,t){if(1&e&&(p._UZ(0,"div",55),p._UZ(1,"div",55),p._UZ(2,"div",55)),2&e){const e=p.oxw().index;p.MGl("id","element-chart-1-",e,""),p.xp6(1),p.MGl("id","element-chart-2-",e,""),p.xp6(1),p.MGl("id","element-chart-3-",e,"")}}function Je(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-expansion-panel",53),p.NdJ("closed",function(){return p.CHM(e),p.oxw().featuredLabel=""})("opened",function(){const t=p.CHM(e).index,i=p.MAs(2);return p.oxw().setupTable(t,i)}),p.TgZ(1,"mat-expansion-panel-header",8,54),p._uU(3),p.qZA(),p.YNc(4,Ue,3,3,"ng-template",10),p.qZA()}if(2&e){const e=t.$implicit;p.Gre("numeric-value-descriptor descriptor-",t.index,""),p.xp6(3),p.hij(" ",e," ")}}let Ee=(()=>{class e{constructor(e){this.cdr=e,this.onReset=new p.vpe,this.parsedDataset=[],this.dragSourceGeneralCharacteristics=[],this.dragTargetGeneralCharacteristics=[],this.dragSource1Municipalities=[],this.dragSource1Characteristics=[],this.dragTarget1Criteria=[],this.dragSource2Microregions=[],this.dragSource2Characteristics=[],this.dragTarget2Criteria=[],this.dragSource3Mesoregions=[],this.dragSource3Characteristics=[],this.dragTarget3Criteria=[]}ngOnInit(){var e,t,i,r,a,n,o;const s=null===(e=this.data)||void 0===e?void 0:e.numericLabels.map((e,t)=>{const i=new h;return i.label=e,i.type="characteristics",i.value={meta_id:t,value:e},i});s&&(this.dragSource1Characteristics.push(...s),this.dragSource2Characteristics.push(...s),this.dragSource3Characteristics.push(...s),this.dragSourceGeneralCharacteristics.push(...s));const c=null===(i=null===(t=this.data)||void 0===t?void 0:t.municipalities)||void 0===i?void 0:i.map(e=>{const t=new h;return t.label=e.name,t.type="municipy",t.value=e,t});c&&this.dragSource1Municipalities.push(...c);const d=null===(a=null===(r=this.data)||void 0===r?void 0:r.microregions)||void 0===a?void 0:a.map(e=>{const t=new h;return t.label=e.name,t.type="microregion",t.value=e,t});d&&this.dragSource2Microregions.push(...d);const l=null===(o=null===(n=this.data)||void 0===n?void 0:n.microregions)||void 0===o?void 0:o.map(e=>{const t=new h;return t.label=e.name,t.type="mesoregion",t.value=e,t});l&&this.dragSource3Mesoregions.push(...l)}reset(){this.onReset.next()}dropGeneral(e){e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generalScatterPlot()}dropMunicipy(e){const t=["drag-municipalities","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTarget1Criteria[e.previousIndex];if("characteristics"===r.type&&"drag-municipalities"===i||"municipy"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMunicipyPlot(),this.cdr.detectChanges()}dropMesoregion(e){const t=["drag-mesoregion","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTarget1Criteria[e.previousIndex];if("characteristics"===r.type&&"drag-mesoregion"===i||"mesoregion"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMesoregionPlot(),this.cdr.detectChanges()}dropMicroregion(e){const t=["drag-microregion","drag-characteristics"],i=e.container.id;if(t.indexOf(i)>=0){if(t.indexOf(e.previousContainer.id)>=0)return;const r=this.dragTarget2Criteria[e.previousIndex];if("characteristics"===r.type&&"drag-microregion"===i||"microregion"===r.type&&"drag-characteristics"===i)return}e.previousContainer===e.container?(0,v.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,v.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.generateMesoregionPlot(),this.cdr.detectChanges()}generateMesoregionPlot(){const e=document.querySelector("#chart-mesoregion-1-1"),t=this.dragTarget3Criteria.filter(e=>"mesoregion"===e.type).map(({value:e})=>e),i=this.dragTarget3Criteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?(e&&(e.innerHTML=""),e&&i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generateMicroregionPlot(){const e=document.querySelector("#chart-microregion-1-1"),t=this.dragTarget2Criteria.filter(e=>"microregion"===e.type).map(({value:e})=>e),i=this.dragTarget2Criteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?(e&&(e.innerHTML=""),e&&i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generateMunicipyPlot(){const e=document.querySelector("#chart-municipy-1-1"),t=this.dragTarget1Criteria.filter(e=>"municipy"===e.type).map(({value:e})=>e),i=this.dragTarget1Criteria.filter(e=>"characteristics"===e.type).map(({value:e})=>e.meta_id);t.length&&i.length?e&&(e.innerHTML="",i.map(i=>{var r;const a=null===(r=this.data)||void 0===r?void 0:r.numericLabels.find((e,t)=>t===i),n=t.map(e=>({y:e.numericEvolution.find(e=>e.meta_id===i).value,type:"box",name:e.name})),o={title:a},s=document.createElement("div");s.id=`chart-meta-${i}`,e.appendChild(s),Z.newPlot(s,n,o,{responsive:!0})})):e.innerHTML=""}generalPlot(e){this.setLabelTitle(e),setTimeout(()=>{var e;const t=document.querySelector("#general-chart-1"),i=null===(e=this.data)||void 0===e?void 0:e.item.numericEvolution.map((e,t)=>{var i,r;return{x:null===(i=this.data)||void 0===i?void 0:i.period,y:e.value,mode:"lines+markers",name:null===(r=this.data)||void 0===r?void 0:r.numericLabels[t]}});Z.newPlot(t,i,{title:"Incid\xeancias",xaxis:{type:"category"},legend:{orientation:"h",y:-.3}},{responsive:!0})},100)}generalScatterPlot(){var e;const t=document.querySelector("#general-chart-2a"),i=document.querySelector("#general-chart-2b");t.innerHTML="",i.innerHTML="";const r=this.dragTargetGeneralCharacteristics.map(({value:e})=>e.meta_id);if(t){const e=this.dragTargetGeneralCharacteristics.map(e=>({label:e.label,values:this.data.item.numericEvolution[e.value.meta_id].value})).map(e=>{var t;return{type:"scatterpolar",r:e.values,theta:null===(t=this.data)||void 0===t?void 0:t.period,fill:"toself",name:e.label}});Z.newPlot(t,e,{title:"Visualiza\xe7\xe3o em Radar",polar:{radialaxis:!0}})}if(i){const t=()=>({showline:!1,zeroline:!1,gridcolor:"#FFF",ticklen:4}),a=Object.assign({title:"Matriz Comparativa das Caracter\xedsticas",hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240, 240, 240, .95)"},r.map((e,i)=>({[0===i?"xaxis":`xaxis${i+1}`]:t(),[0===i?"yaxis":`yaxis${i+1}`]:t()})));r.length>1&&(a.height=260*r.length,a.width=i.parentElement.getBoundingClientRect().width-60,a.autosize=!1);const n=null===(e=this.data)||void 0===e?void 0:e.period.map((e,t)=>({type:"splom",name:e,marker:{size:7},dimensions:r.map(e=>{var i,r,a,n;return{label:null===(r=null===(i=this.data)||void 0===i?void 0:i.numericLabels)||void 0===r?void 0:r.find((t,i)=>i===e),values:[l.R.formatValues(null===(n=null===(a=this.data)||void 0===a?void 0:a.item)||void 0===n?void 0:n.numericEvolution[e].value[t])]}})})),o=document.createElement("div");o.id="chart-splom",i.appendChild(o),Z.newPlot(o,n,a,{responsive:!0})}}setupTable(e,t){var i;if(this.setLabelTitle(t),this.parsedDataset[e])return;const r=null===(i=this.data)||void 0===i?void 0:i.item.numericEvolution[e].value,a=r.map(e=>({item:e}));this.parsedDataset[e]={dataset:a,itemNumericEvolution:r},setTimeout(()=>{var t;const i=document.querySelector(`#element-chart-1-${e}`);if(i){const e=[{x:null===(t=this.data)||void 0===t?void 0:t.period,y:r,name:"Mesorregi\xe3o",type:"lines+markers"}];Z.newPlot(i,e,{title:"Incid\xeancias",barmode:"stack",legend:{orientation:"h"}},{responsive:!0})}},100)}setLabelTitle(e){e&&setTimeout(()=>this.featuredLabel=e._element.nativeElement.innerText,0)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(p.sBO))},e.\u0275cmp=p.Xpm({type:e,selectors:[["state-details"]],inputs:{data:"data"},outputs:{onReset:"onReset"},decls:57,vars:36,consts:[[1,"region-wrapper"],[1,"toolbar"],[1,"left"],["class","region-characteristic-view-chip",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"region-wrapper-content"],[1,"accordion"],[1,"featured-expansion-item",3,"closed","opened"],["collapsedHeight","48px","expandedHeight","48px"],["mainTitle",""],["matExpansionPanelContent",""],[1,"featured-expansion-item",3,"opened","closed"],[1,"box","box-info",2,"margin","16px 0"],[1,"box-title"],[1,"box-content"],["labelMesoregion",""],["labelMicroregion",""],["municipyLabel",""],[3,"class","closed","opened",4,"ngFor","ngForOf"],[1,"region-characteristic-view-chip"],["id","general-chart-1"],[1,"interactive-charts"],[1,"box","box-info",2,"margin-bottom","16px"],[1,"drag-outlet"],[1,"drag-container","drag-container-3"],["id","drag-characteristics","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceGenChar","cdkDropList"],["class","drag-item","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"drag-container","drag-target","drag-container-3"],["id","drag-criteria","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneGenList","cdkDropList"],["class","drag-item type-2","cdkDrag","",4,"ngFor","ngForOf"],["id","general-chart-2a"],["id","general-chart-2b"],["cdkDrag","",1,"drag-item",3,"ngClass"],["cdkDrag","",1,"drag-item","type-2"],[1,"drag-container","drag-container-1"],["id","drag-mesoregion","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["source3a","cdkDropList"],[1,"drag-container","drag-container-2"],["source3b","cdkDropList"],["target3","cdkDropList"],["id","chart-mesoregion-1-1"],["id","drag-microregion","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["source2a","cdkDropList"],["source2b","cdkDropList"],["target2","cdkDropList"],["id","chart-microregion-1-1"],["id","drag-municipalities","cdkDropList","",1,"drag-list","autoheight",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["sourceMunicipalities","cdkDropList"],["sourceCharacteristics","cdkDropList"],["doneList","cdkDropList"],["id","chart-municipy-1-1"],[3,"closed","opened"],["itemLabel",""],[3,"id"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._uU(3),p.ALo(4,"translate"),p.YNc(5,ue,2,1,"div",3),p.qZA(),p.TgZ(6,"button",4),p.NdJ("click",function(){return t.reset()}),p.TgZ(7,"mat-icon"),p._uU(8,"close"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",5),p.TgZ(10,"mat-accordion",6),p.TgZ(11,"mat-expansion-panel",7),p.NdJ("closed",function(){return t.featuredLabel=""})("opened",function(){p.CHM(e);const i=p.MAs(13);return t.generalPlot(i)}),p.TgZ(12,"mat-expansion-panel-header",8,9),p._uU(14),p.ALo(15,"translate"),p.qZA(),p.YNc(16,Ze,26,22,"ng-template",10),p.qZA(),p.TgZ(17,"mat-expansion-panel",11),p.NdJ("opened",function(){p.CHM(e);const i=p.MAs(26);return t.setLabelTitle(i)})("closed",function(){return t.featuredLabel=""}),p.TgZ(18,"div",12),p.TgZ(19,"div",13),p._uU(20),p.ALo(21,"translate"),p.qZA(),p.TgZ(22,"div",14),p._uU(23),p.ALo(24,"translate"),p.qZA(),p.qZA(),p.TgZ(25,"mat-expansion-panel-header",8,15),p._uU(27),p.ALo(28,"translate"),p.qZA(),p.YNc(29,De,23,25,"ng-template",10),p.qZA(),p.TgZ(30,"mat-expansion-panel",11),p.NdJ("opened",function(){p.CHM(e);const i=p.MAs(39);return t.setLabelTitle(i)})("closed",function(){return t.featuredLabel=""}),p.TgZ(31,"div",12),p.TgZ(32,"div",13),p._uU(33),p.ALo(34,"translate"),p.qZA(),p.TgZ(35,"div",14),p._uU(36),p.ALo(37,"translate"),p.qZA(),p.qZA(),p.TgZ(38,"mat-expansion-panel-header",8,16),p._uU(40),p.ALo(41,"translate"),p.qZA(),p.YNc(42,we,23,25,"ng-template",10),p.qZA(),p.TgZ(43,"mat-expansion-panel",11),p.NdJ("opened",function(){p.CHM(e);const i=p.MAs(52);return t.setLabelTitle(i)})("closed",function(){return t.featuredLabel=""}),p.TgZ(44,"div",12),p.TgZ(45,"div",13),p._uU(46),p.ALo(47,"translate"),p.qZA(),p.TgZ(48,"div",14),p._uU(49),p.ALo(50,"translate"),p.qZA(),p.qZA(),p.TgZ(51,"mat-expansion-panel-header",8,17),p._uU(53),p.ALo(54,"translate"),p.qZA(),p.YNc(55,Oe,23,25,"ng-template",10),p.qZA(),p.YNc(56,Je,5,4,"mat-expansion-panel",18),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(3),p.AsE(" ",p.lcZ(4,14,"model-constants."+(null==t.data?null:t.data.type)),": ",null==t.data||null==t.data.item?null:t.data.item.name," "),p.xp6(2),p.Q6J("ngIf",t.featuredLabel),p.xp6(9),p.hij(" ",p.lcZ(15,16,"details-state.all")," "),p.xp6(6),p.Oqu(p.lcZ(21,18,"details-state.drag-drop.interactive-mesoregion.title")),p.xp6(3),p.Oqu(p.lcZ(24,20,"details-state.drag-drop.interactive-mesoregion.content")),p.xp6(4),p.hij(" ",p.lcZ(28,22,"details-state.mesoregion")," "),p.xp6(6),p.Oqu(p.lcZ(34,24,"details-state.drag-drop.interactive-microregion.title")),p.xp6(3),p.Oqu(p.lcZ(37,26,"details-state.drag-drop.interactive-microregion.content")),p.xp6(4),p.hij(" ",p.lcZ(41,28,"details-state.microregion")," "),p.xp6(6),p.Oqu(p.lcZ(47,30,"details-state.drag-drop.interactive-municipalities.title")),p.xp6(3),p.Oqu(p.lcZ(50,32,"details-state.drag-drop.interactive-municipalities.content")),p.xp6(4),p.hij(" ",p.lcZ(54,34,"details-state.municipalities")," "),p.xp6(3),p.Q6J("ngForOf",null==t.data?null:t.data.numericLabels))},directives:[o.O5,f.lW,x.Hw,T.pp,T.ib,T.yz,T.HS,o.sg,v.Wj,v.Zt,o.mk],pipes:[r.X$],styles:[""]}),e})();var Se=i(7997);function Ne(e,t){1&e&&p._UZ(0,"select-project-warning")}function Qe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"municipy-details",5),p.NdJ("onReset",function(){return p.CHM(e),p.oxw(2).cleanView()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("data",e.data)}}function Fe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"microregion-details",5),p.NdJ("onReset",function(){return p.CHM(e),p.oxw(2).cleanView()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("data",e.data)}}function He(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mesoregion-details",5),p.NdJ("onReset",function(){return p.CHM(e),p.oxw(2).cleanView()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("data",e.data)}}function Pe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"state-details",5),p.NdJ("onReset",function(){return p.CHM(e),p.oxw(2).cleanView()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("data",e.data)}}function Ie(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"div",7),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",8),p.TgZ(5,"region-selector",9),p.NdJ("onSelect",function(t){return p.CHM(e),p.oxw(2).onRegionSelect(t)}),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(2),p.hij(" ",p.lcZ(3,1,"details-general.title")," "))}function je(e,t){if(1&e&&(p.TgZ(0,"div",2),p.YNc(1,Qe,1,1,"municipy-details",3),p.YNc(2,Fe,1,1,"microregion-details",3),p.YNc(3,He,1,1,"mesoregion-details",3),p.YNc(4,Pe,1,1,"state-details",3),p.YNc(5,Ie,6,3,"div",4),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngIf",null==e.data?null:e.data.isAMunicipyDataset),p.xp6(1),p.Q6J("ngIf",null==e.data?null:e.data.isAMicroregionDataset),p.xp6(1),p.Q6J("ngIf",null==e.data?null:e.data.isAMesoregionDataset),p.xp6(1),p.Q6J("ngIf",null==e.data?null:e.data.isStateDataset),p.xp6(1),p.Q6J("ngIf",!e.data)}}let Ge=(()=>{class e{constructor(e,t){this.engineService=e,this.pubsub=t,this.subscriptions=[]}ngOnInit(){this.bootView(),this.subscriptions.push(this.pubsub.getAsBehaviorSubject(d.Y.GLOBAL_PROJECT_CHANGE).subscribe(e=>{e&&(this.initiated=!0)}))}onRegionSelect(e){this.bootView(e)}cleanView(){this.data=null,localStorage.removeItem("details-dataset")}bootView(e=null){const t=e||JSON.parse(localStorage.getItem("details-dataset"));t&&this.subscriptions.push(this.pubsub.getAsBehaviorSubject(d.Y.GLOBAL_STATE_CHANGE).pipe((0,s.h)(e=>!!e),(0,c.w)(e=>this.engineService.getEngineEvolution(e))).subscribe(e=>{this.evolutionData=e,t.slug?this.prepareDataset(t):this.handlePreparedDataset(t)}))}prepareDataset(e){var t,i;const r={numericLabels:this.evolutionData.dataFor,period:this.evolutionData.periods};if("uf"===e.slug){const t=this.evolutionData.uf[e.id],i=Object.values(this.evolutionData.mesoregion).filter(({uf_id:e})=>e===t.id),a=i.map(({id:e})=>e),n=Object.values(this.evolutionData.microregion).filter(({mesoregion_id:e})=>a.indexOf(e)>-1),o=n.map(({id:e})=>e),s=Object.values(this.evolutionData.municipalities).filter(({microregion_id:e})=>o.indexOf(e)>-1);r.item=t,r.mesoregions=i,r.microregions=n,r.municipalities=s,r.type="state"}else if("mesoregion"===e.slug){const i=this.evolutionData.mesoregion[e.id],a=Object.values(this.evolutionData.microregion).filter(({mesoregion_id:e})=>e===i.id),n=a.map(({id:e})=>e),o=Object.values(this.evolutionData.municipalities).filter(({microregion_id:e})=>n.indexOf(e)>-1),s=Object.values(this.evolutionData.uf)[0].id;r.item=i,r.quantity=Object.values(null===(t=this.evolutionData)||void 0===t?void 0:t.mesoregion).length,r.uf=this.evolutionData.uf[s],r.microregions=a,r.municipalities=o,r.type="mesoregion"}else if("microregion"===e.slug){const t=this.evolutionData.microregion[e.id],a=this.evolutionData.mesoregion[t.mesoregion_id],n=Object.values(this.evolutionData.municipalities).filter(({microregion_id:e})=>e===t.id);r.item=t,r.quantity=Object.values(null===(i=this.evolutionData)||void 0===i?void 0:i.microregion).length,r.uf=this.evolutionData.uf[a.uf_id],r.mesoregion=a,r.municipalities=n,r.type="microregion"}else if("municipalities"===e.slug){const t=this.evolutionData.municipalities[e.id],i=this.evolutionData.microregion[t.microregion_id],a=this.evolutionData.mesoregion[i.mesoregion_id];r.item=t,r.quantity=Object.values(this.evolutionData.municipalities).length,r.uf=this.evolutionData.uf[a.uf_id],r.mesoregion=a,r.microregion=i,r.type="municipy"}this.handlePreparedDataset(r)}handlePreparedDataset(e){switch(null==e?void 0:e.type){case"municipy":this.parseMunicipy(e);break;case"microregion":this.parseMicroregion(e);break;case"mesoregion":this.parseMesoregion(e);break;case"state":this.parseState(e)}}parseMunicipy(e){var t,i;e.isAMunicipyDataset=!0;for(let r=0;r<(null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.numericEvolution.length);r++){const t=null===(i=null==e?void 0:e.item)||void 0===i?void 0:i.numericEvolution[r];t.value.forEach((i,a)=>{0===a&&(t.percentageOverMicroregion=[],t.percentageOverMesoregion=[],t.percentageOverUf=[]),t.percentageOverMicroregion.push(l.R.percentage(e.microregion.numericEvolution[r].value[a],i)),t.percentageOverMesoregion.push(l.R.percentage(e.mesoregion.numericEvolution[r].value[a],i)),t.percentageOverUf.push(l.R.percentage(e.uf.numericEvolution[r].value[a],i))})}this.data=e}parseMicroregion(e){var t,i;e.isAMicroregionDataset=!0;for(let r=0;r<(null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.numericEvolution.length);r++){const t=null===(i=null==e?void 0:e.item)||void 0===i?void 0:i.numericEvolution[r];t.value.forEach((i,a)=>{0===a&&(t.percentageOverMesoregion=[],t.percentageOverUf=[]),t.percentageOverMesoregion.push(l.R.percentage(e.mesoregion.numericEvolution[r].value[a],i)),t.percentageOverUf.push(l.R.percentage(e.uf.numericEvolution[r].value[a],i)),e.municipalities.forEach(e=>{const t=e.numericEvolution[r];t.percentageOverMicroregion||(t.percentageOverMicroregion=[]),t.percentageOverMicroregion.push(l.R.percentage(i,t.value[a]))})})}this.data=e}parseMesoregion(e){var t,i;e.isAMesoregionDataset=!0;for(let r=0;r<(null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.numericEvolution.length);r++){const t=null===(i=null==e?void 0:e.item)||void 0===i?void 0:i.numericEvolution[r];t.value.forEach((i,a)=>{0===a&&(t.percentageOverUf=[]),t.percentageOverUf.push(l.R.percentage(e.uf.numericEvolution[r].value[a],i)),e.microregions.forEach(e=>{const t=e.numericEvolution[r];t.percentageOverMesoregion||(t.percentageOverMesoregion=[]),t.percentageOverMesoregion.push(l.R.percentage(i,t.value[a]))}),e.municipalities.forEach(e=>{const t=e.numericEvolution[r];t.percentageOverMesoregion||(t.percentageOverMesoregion=[]),t.percentageOverMesoregion.push(l.R.percentage(i,t.value[a]))})})}this.data=e}parseState(e){e.isStateDataset=!0,this.data=e}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(u.S),p.Y36(g.A))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-region-details"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","wrapper",4,"ngIf"],[1,"wrapper"],[3,"data","onReset",4,"ngIf"],["class","region-wrapper",4,"ngIf"],[3,"data","onReset"],[1,"region-wrapper"],[1,"toolbar"],[1,"region-wrapper-content"],[3,"onSelect"]],template:function(e,t){1&e&&(p.YNc(0,Ne,1,0,"select-project-warning",0),p.YNc(1,je,6,5,"div",1)),2&e&&(p.Q6J("ngIf",!t.initiated),p.xp6(1),p.Q6J("ngIf",t.initiated))},directives:[o.O5,m.D,k,Y,pe,Ee,Se.T],pipes:[r.X$],styles:["[_ngcontent-%COMP%]:root{--pallete-primary:#000;--pallete-accent:#000;--sidenav-width:200px}  .region-wrapper .drag-outlet,   .region-wrapper .toolbar,   .region-wrapper .toolbar .left{display:flex}  .region-wrapper .toolbar .left{align-items:center;justify-content:flex-start}  .region-wrapper .drag-outlet{align-items:flex-start;justify-content:center}  .region-wrapper .toolbar{align-items:center;justify-content:space-between}  .region-wrapper-content{padding:16px;overflow-y:auto;height:calc(var(--innerHeight) - 128px)}  .region-wrapper .toolbar .left{width:calc(100% - 40px)}  .region-wrapper .region-characteristic-view-chip{background:var(--pallete-accent);padding:6px 12px;border-radius:30px;margin-left:8px;color:#fff;font-size:12px}  .region-wrapper .featured-expansion-item:not(:first-of-type){border-top:1px solid #f5f5f5}  .region-wrapper .featured-expansion-item .mat-expansion-panel-header{font-weight:500}  .region-wrapper .featured-expansion-item .mat-expansion-panel-header,   .region-wrapper .featured-expansion-item .mat-expansion-panel-header:active,   .region-wrapper .featured-expansion-item .mat-expansion-panel-header:hover{background:var(--pallete-primary)!important}  .region-wrapper .featured-expansion-item .mat-expansion-panel-header,   .region-wrapper .featured-expansion-item .mat-expansion-panel-header .mat-expansion-indicator:after{color:#fff}  .region-wrapper .featured-item-outlet{margin-bottom:24px}  .region-wrapper .numeric-value-descriptor .featured-item-outlet{flex-wrap:wrap}  .region-wrapper .numeric-value-descriptor .featured-item{width:250px;min-width:250px;margin-bottom:16px}  .region-wrapper .drag-outlet{flex-wrap:wrap}  .region-wrapper .drag-container h2{font-size:16px;margin-bottom:0}  .region-wrapper .drag-container .drag-list{height:200px;width:100%;overflow-y:auto}  .region-wrapper .drag-container .drag-list.autoheight{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;min-height:80px!important;max-height:200px}  .region-wrapper .drag-container .drag-list::-webkit-scrollbar{width:5px}  .region-wrapper .drag-container .drag-list::-webkit-scrollbar-track{box-shadow:inset 0 0 5px grey}  .region-wrapper .drag-container .drag-list::-webkit-scrollbar-thumb{background:#333}  .region-wrapper .drag-container .drag-item{padding:4px 12px;border-radius:30px;background:#757575;display:inline-block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:4px;cursor:pointer;border:2px solid #0000}  .region-wrapper .drag-container .drag-item.type-1{background:var(--pallete-primary);color:#fff}  .region-wrapper .drag-container .drag-item.type-2{background:var(--pallete-accent);color:#fff}  .region-wrapper .drag-target .drag-list{height:200px;width:100%;background-color:#f5f5f5;border:1px dashed var(--pallete-primary)}  .region-wrapper .drag-container-1,   .region-wrapper .drag-container-2{width:50%}  .region-wrapper .drag-container-3{width:100%}  .is-phone .region-wrapper .featured-item{width:50%}  .is-phone .region-wrapper .drag-container{width:100%}  .is-phone .region-wrapper .drag-list{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;min-height:100px;max-height:200px}"]}),e})(),Ye=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,n.Bz.forChild([{path:"",component:Ge}])],n.Bz]}),e})(),$e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,r.aw,T.To,v._t,f.ot,x.Ps]]}),e})(),Ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,r.aw,v._t,x.Ps,f.ot,T.To]]}),e})(),Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,r.aw,T.To,v._t,f.ot,x.Ps]]}),e})(),ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,r.aw,x.Ps,T.To,v._t,f.ot]]}),e})();var Ke=i(4446);let Be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,Re,Ve,$e,Ye,ze,a.C,Ke.q,r.aw]]}),e})()}}]);